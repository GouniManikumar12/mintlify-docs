---
title: 'JSON Schemas'
description: 'AMXP protocol JSON schemas for validation and integration'
icon: 'brackets-curly'
---

# JSON Schemas

AMXP defines JSON schemas for all protocol entities to ensure type safety, validation, and interoperability across implementations.

## Schema Catalog

All schemas are available in the `/schemas` directory and follow JSON Schema Draft 2020-12.

<CardGroup cols={2}>
  <Card title="Common Definitions" icon="puzzle-piece" href="/schemas/common.json">
    Shared types and definitions used across all schemas
  </Card>
  <Card title="Context Request" icon="message-question" href="/schemas/context-request.json">
    Platform request for ad recommendations
  </Card>
  <Card title="Bid" icon="hand-holding-dollar" href="/schemas/bid.json">
    Advertiser bid submission format
  </Card>
  <Card title="Auction Result" icon="gavel" href="/schemas/auction-result.json">
    Network auction decision and winner selection
  </Card>
  <Card title="CPX Exposure Event" icon="eye" href="/schemas/event-cpx-exposure.json">
    Impression/exposure tracking event
  </Card>
  <Card title="CPC Click Event" icon="hand-pointer" href="/schemas/event-cpc-click.json">
    Click tracking event
  </Card>
  <Card title="CPA Conversion Event" icon="check-circle" href="/schemas/event-cpa-conversion.json">
    Conversion tracking event
  </Card>
  <Card title="Ledger Record" icon="book-open" href="/schemas/ledger-record.json">
    Financial ledger entry format
  </Card>
</CardGroup>

## Using the Schemas

### Validation

All AMXP implementations should validate payloads against these schemas before processing:

```javascript
import Ajv from 'ajv';
import contextRequestSchema from './schemas/context-request.json';

const ajv = new Ajv();
const validate = ajv.compile(contextRequestSchema);

const isValid = validate(payload);
if (!isValid) {
  console.error(validate.errors);
}
```

### TypeScript Generation

Generate TypeScript types from schemas:

```bash
npm install -g json-schema-to-typescript
json2ts schemas/context-request.json > types/context-request.ts
```

### Schema Versioning

All schemas include a `$schema` field pointing to the JSON Schema specification version and an `$id` field for schema identification:

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://specs.admesh.dev/schemas/context-request.json",
  "title": "Context Request",
  "type": "object"
}
```

## Common Definitions

The `common.json` schema contains shared definitions used across multiple schemas:

- **UUID**: Standard UUID v4 format
- **Timestamp**: ISO 8601 timestamp
- **Currency**: ISO 4217 currency code
- **URL**: Valid HTTP/HTTPS URL
- **Semantic Version**: Semver format (e.g., "1.0.0")

## Schema Files

<AccordionGroup>
  <Accordion title="common.json" icon="puzzle-piece">
    Shared type definitions and common patterns used across all AMXP schemas.
    
    **Key Definitions:**
    - UUID format
    - Timestamp format
    - Currency codes
    - URL validation
    - Version strings
  </Accordion>

  <Accordion title="context-request.json" icon="message-question">
    Schema for platform requests to ad networks for recommendations.
    
    **Required Fields:**
    - `session_id`: Unique session identifier
    - `message_id`: Unique message identifier
    - `user_query`: User's search query or intent
    - `platform_id`: Platform identifier
    
    **Optional Fields:**
    - `context`: Additional context data
    - `user_preferences`: User preferences and settings
    - `location`: Geographic location data
  </Accordion>

  <Accordion title="bid.json" icon="hand-holding-dollar">
    Schema for advertiser bid submissions in response to context requests.
    
    **Required Fields:**
    - `bid_id`: Unique bid identifier
    - `advertiser_id`: Advertiser identifier
    - `amount`: Bid amount in specified currency
    - `currency`: ISO 4217 currency code
    - `ad_content`: Advertisement content
    
    **Optional Fields:**
    - `targeting`: Targeting criteria
    - `creative_assets`: Creative assets (images, videos)
    - `landing_url`: Destination URL
  </Accordion>

  <Accordion title="auction-result.json" icon="gavel">
    Schema for network auction decisions and winner selection.
    
    **Required Fields:**
    - `auction_id`: Unique auction identifier
    - `winner_bid_id`: Winning bid identifier
    - `winning_amount`: Final auction price
    - `timestamp`: Auction completion time
    
    **Optional Fields:**
    - `runner_up_bids`: Second-price auction data
    - `auction_metadata`: Additional auction information
  </Accordion>

  <Accordion title="event-cpx-exposure.json" icon="eye">
    Schema for impression/exposure tracking events.
    
    **Required Fields:**
    - `event_id`: Unique event identifier
    - `session_id`: Associated session ID
    - `message_id`: Associated message ID
    - `recommendation_id`: Recommendation identifier
    - `timestamp`: Event timestamp
    
    **Optional Fields:**
    - `viewport_data`: Viewport visibility data
    - `dwell_time`: Time in viewport
  </Accordion>

  <Accordion title="event-cpc-click.json" icon="hand-pointer">
    Schema for click tracking events.
    
    **Required Fields:**
    - `event_id`: Unique event identifier
    - `session_id`: Associated session ID
    - `message_id`: Associated message ID
    - `recommendation_id`: Recommendation identifier
    - `timestamp`: Click timestamp
    
    **Optional Fields:**
    - `click_position`: Position of click
    - `referrer`: Referrer URL
  </Accordion>

  <Accordion title="event-cpa-conversion.json" icon="check-circle">
    Schema for conversion tracking events.
    
    **Required Fields:**
    - `event_id`: Unique event identifier
    - `session_id`: Associated session ID
    - `conversion_type`: Type of conversion
    - `timestamp`: Conversion timestamp
    
    **Optional Fields:**
    - `conversion_value`: Monetary value
    - `conversion_metadata`: Additional conversion data
  </Accordion>

  <Accordion title="ledger-record.json" icon="book-open">
    Schema for financial ledger entries.
    
    **Required Fields:**
    - `record_id`: Unique record identifier
    - `transaction_type`: Type of transaction
    - `amount`: Transaction amount
    - `currency`: ISO 4217 currency code
    - `timestamp`: Transaction timestamp
    
    **Optional Fields:**
    - `related_event_id`: Associated event ID
    - `settlement_status`: Settlement status
  </Accordion>
</AccordionGroup>

## Conformance Testing

All AMXP implementations must pass schema validation tests. See the [Conformance](/governance/conformance) documentation for certification requirements.

## Schema Updates

Schemas follow semantic versioning:
- **Major**: Breaking changes (field removal, type changes)
- **Minor**: Additive changes (new optional fields)
- **Patch**: Documentation or clarification updates

See [Versioning](/governance/versioning) for the complete version management strategy.

