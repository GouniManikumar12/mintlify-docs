# Bid Schema

## Overview
Brand Agent bid submitted in response to a `ContextRequest`. Includes pricing for CPX/CPC/CPA, structured offer metadata, and a signed auth block.

## Required Fields
| Field | Type | Description |
|--------|------|-------------|
| `bid_id` | string | Unique identifier for this bid |
| `brand_agent_id` | string | Identifier of the Brand Agent placing the bid |
| `context_id` | string | ID of the `ContextRequest` being bid on |
| `wallet_id` | string | Wallet to debit if the bid wins |
| `pricing` | object | Pricing vector (CPX required, CPC/CPA optional) |
| `offer` | object | Offer metadata + creative input |
| `timestamp` | string | ISO 8601 timestamp for the bid |
| `auth` | object | Nonce + signature for replay prevention |

## Pricing Object
| Field | Type | Required | Description |
|--------|------|----------|-------------|
| `cpx` | string | Yes | Price per exposure (USD). Pattern: `^\d+\.\d{2,}$` |
| `cpc` | string | No | Price per click (USD). Pattern: `^\d+\.\d{2,}$` |
| `cpa` | string | No | Price per conversion (USD). Pattern: `^\d+\.\d{2,}$` |
| `currency` | string | No | ISO 4217 currency code (default `USD`) |

## Offer Object
Contains `creative_input`, the normalized asset payload shared with the operator.

| Field | Type | Required | Description |
|--------|------|----------|-------------|
| `brand_name` | string | Yes | Brand or advertiser name |
| `product_name` | string | Yes | Product or offer name |
| `descriptions` | string[] | Yes | Long-form descriptions / copy |
| `value_props` | string[] | Yes | Short bullet value props |
| `resource_urls` | URI[] | Yes | Destination / tracking URLs |
| `image_urls` | URI[] | Yes | Creative image URLs |

## Authentication Object
| Field | Type | Description |
|--------|------|-------------|
| `nonce` | string | One-time nonce used to prevent replays |
| `signature` | string | Signature over the canonical bid payload |

## Example
```json
{
  "bid_id": "bid_7823",
  "brand_agent_id": "brand_agent_123",
  "context_id": "ctx_92f",
  "wallet_id": "wallet_890",
  "pricing": {
    "cpx": "0.05",
    "cpc": "0.45",
    "cpa": "10.00",
    "currency": "USD"
  },
  "offer": {
    "creative_input": {
      "brand_name": "Nimbus",
      "product_name": "Nimbus CRM Pro",
      "descriptions": ["AI-native CRM for 5-50 person teams."],
      "value_props": ["Automated pipeline insights", "Embedded copilots"],
      "resource_urls": ["https://nimbus.example/signup"],
      "image_urls": ["https://cdn.example.com/nimbus/crm.png"]
    }
  },
  "timestamp": "2025-11-11T18:00:01Z",
  "auth": {
    "nonce": "nonce_456",
    "signature": "sig_789"
  }
}
```

## Validation Rules
- `cpx`, `cpc`, `cpa` must match `^\d+\.\d{2,}$`
- Arrays in `creative_input` must contain at least one entry
- `resource_urls` and `image_urls` must be valid URIs
- `timestamp` must be ISO 8601 / RFC 3339 formatted
