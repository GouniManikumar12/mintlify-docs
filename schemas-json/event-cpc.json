{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "CPCClickEvent",
  "description": "Event fired when a user clicks on an ad",
  "type": "object",
  "required": ["event_type", "serve_token", "event_id", "ts"],
  "properties": {
    "event_type": {
      "type": "string",
      "const": "cpc_click",
      "description": "Event type identifier"
    },
    "serve_token": {
      "type": "string",
      "description": "Serve token from the auction result",
      "example": "stk_abcxyz123"
    },
    "event_id": {
      "type": "string",
      "description": "Unique identifier for this click event",
      "example": "ev_991"
    },
    "s2s": {
      "type": "boolean",
      "description": "Whether this is a server-to-server event (true) or client-side (false)",
      "example": true
    },
    "click_metadata": {
      "type": "object",
      "description": "Additional click context",
      "properties": {
        "user_agent": {
          "type": "string",
          "description": "User agent string of the client",
          "example": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)"
        },
        "ip_address": {
          "type": "string",
          "description": "IP address of the user (for fraud detection)",
          "format": "ipv4",
          "example": "192.168.1.1"
        },
        "referrer": {
          "type": "string",
          "description": "HTTP referrer URL",
          "format": "uri",
          "example": "https://chatapp.example/session/s_001"
        }
      }
    },
    "ts": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of the click",
      "example": "2025-11-11T18:02:00Z"
    }
  },
  "examples": [
    {
      "event_type": "cpc_click",
      "serve_token": "stk_abcxyz123",
      "event_id": "ev_991",
      "s2s": true,
      "click_metadata": {
        "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",
        "ip_address": "192.168.1.1",
        "referrer": "https://chatapp.example/session/s_001"
      },
      "ts": "2025-11-11T18:02:00Z"
    }
  ]
}

